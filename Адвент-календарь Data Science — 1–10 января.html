<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Адвент-календарь Data Science — 1–10 января</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#121a33;
      --card:#141b35;
      --card2:#0f1630;
      --text:#e8ecff;
      --muted:#a9b1d6;
      --accent:#7aa2f7;
      --accent2:#bb9af7;
      --good:#2dd4bf;
      --bad:#f7768e;
      --shadow: 0 14px 40px rgba(0,0,0,.35);
      --r:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1100px 700px at 10% 0%, rgba(122,162,247,.25), transparent 55%),
        radial-gradient(900px 650px at 90% 10%, rgba(187,154,247,.22), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    header{
      max-width:1100px;
      margin:0 auto;
      padding:28px 18px 10px;
      display:flex;
      gap:14px;
      align-items:flex-end;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    h1{
      font-size: clamp(22px, 3vw, 34px);
      margin:0;
      letter-spacing:.2px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      line-height:1.35;
      max-width:58ch;
    }
    .meta{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.08);
      background:rgba(20,27,53,.6);
      border-radius:999px;
      box-shadow:0 8px 24px rgba(0,0,0,.18);
      color:var(--muted);
      font-size:13px;
      white-space:nowrap;
      user-select:none;
    }
    .dot{
      width:9px;height:9px;border-radius:50%;
      background:var(--good);
      box-shadow:0 0 0 6px rgba(45,212,191,.12);
    }
    .dot.locked{ background:var(--bad); box-shadow:0 0 0 6px rgba(247,118,142,.12); }

    main{ max-width:1100px; margin:0 auto; padding:14px 18px 40px; }

    .grid{
      display:grid;
      grid-template-columns: repeat(5, minmax(160px, 1fr));
      gap:14px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: repeat(3, minmax(160px, 1fr)); }
    }
    @media (max-width: 560px){
      .grid{ grid-template-columns: repeat(2, minmax(140px, 1fr)); }
    }

    .card{
      position:relative;
      border-radius:var(--r);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      box-shadow: var(--shadow);
      overflow:hidden;
      min-height:160px;
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(250px 140px at 30% 20%, rgba(122,162,247,.25), transparent 60%),
        radial-gradient(260px 140px at 70% 0%, rgba(187,154,247,.18), transparent 60%);
      pointer-events:none;
      opacity:.9;
    }
    .card-inner{
      position:relative;
      padding:14px 14px 16px;
      height:100%;
      display:flex;
      flex-direction:column;
      justify-content:flex-start;
      gap:10px;
    }
    .topline{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .day{
      font-size:34px;
      line-height:1;
      font-weight:800;
      letter-spacing:-.5px;
    }
    .date{
      color:var(--muted);
      font-size:12px;
      margin-top:6px;
    }
    .badge{
      font-size:12px;
      color:rgba(232,236,255,.92);
      padding:8px 10px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(15,22,48,.55);
      white-space:nowrap;
    }
    .badge.locked{ color:rgba(247,118,142,.95); border-color: rgba(247,118,142,.35); }
    .badge.open{ color:rgba(45,212,191,.95); border-color: rgba(45,212,191,.35); }

    /* "Окошко" (дверца) */
    .door{
      position:absolute;
      inset:0;
      background:
        linear-gradient(180deg, rgba(15,22,48,.92), rgba(20,27,53,.92));
      border-left:1px solid rgba(255,255,255,.10);
      transform-origin:left center;
      transition: transform .7s cubic-bezier(.2,.8,.2,1), filter .7s;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:14px;
      text-align:center;
      z-index:2;
      backdrop-filter: blur(6px);
    }
    .door::before{
      content:"";
      position:absolute;
      inset:0;
      background:
        radial-gradient(420px 220px at 20% 30%, rgba(122,162,247,.18), transparent 60%),
        radial-gradient(420px 220px at 80% 10%, rgba(187,154,247,.14), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .door-content{
      position:relative;
      z-index:1;
      display:flex;
      flex-direction:column;
      gap:10px;
      align-items:center;
    }
    .door-title{
      font-weight:700;
      letter-spacing:.2px;
    }
    .door-hint{
      color:var(--muted);
      font-size:13px;
      line-height:1.25;
    }
    .btn{
      appearance:none;
      border:0;
      border-radius:12px;
      padding:10px 12px;
      font-weight:700;
      color:var(--text);
      cursor:pointer;
      background: linear-gradient(90deg, rgba(122,162,247,.95), rgba(187,154,247,.95));
      box-shadow:0 10px 24px rgba(0,0,0,.25);
      transition: transform .12s ease;
    }
    .btn:active{ transform: translateY(1px); }
    .btn[disabled]{
      cursor:not-allowed;
      filter:saturate(.2) brightness(.9);
      opacity:.9;
      box-shadow:none;
    }

    /* Открытое состояние */
    .card.open .door{
      transform: perspective(1000px) rotateY(-105deg);
      filter: brightness(.98);
    }
    .content-preview{
      position:relative;
      z-index:1;
      color:rgba(232,236,255,.92);
      font-size:13px;
      line-height:1.35;
    }
    .content-preview b{ color:var(--text); }
    .linklike{
      color:var(--accent);
      text-decoration:underline;
      text-underline-offset:3px;
    }

    /* Диалог (модалка) */
    dialog{
      width:min(760px, calc(100vw - 28px));
      border:1px solid rgba(255,255,255,.12);
      border-radius:18px;
      padding:0;
      background: linear-gradient(180deg, rgba(20,27,53,.98), rgba(15,22,48,.98));
      color:var(--text);
      box-shadow: 0 30px 80px rgba(0,0,0,.55);
    }
    dialog::backdrop{
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(6px);
    }
    .modal-header{
      padding:16px 18px;
      border-bottom:1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .modal-title{
      margin:0;
      font-size:18px;
      line-height:1.25;
    }
    .modal-sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.35;
    }
    .modal-body{
      padding:16px 18px 18px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .modal-body ul{ margin:0; padding-left:18px; color:rgba(232,236,255,.92); }
    .modal-body li{ margin:8px 0; }
    .modal-body a{
      color:var(--accent);
      text-decoration:underline;
      text-underline-offset:3px;
      word-break:break-word;
    }
    .modal-footer{
      padding:14px 18px 18px;
      display:flex;
      gap:10px;
      justify-content:flex-end;
    }
    .btn-secondary{
      background: transparent;
      border:1px solid rgba(255,255,255,.14);
      color:var(--text);
      box-shadow:none;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size:12px;
      color:var(--muted);
    }

    /* Эффект падающего снега */
    .snow-container{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      pointer-events:none;
      z-index:9999;
      overflow:hidden;
    }
    .snowflake{
      position:absolute;
      color:#ffffff;
      font-size:1em;
      font-family:Arial, sans-serif;
      text-shadow:0 0 5px rgba(255,255,255,0.8);
      user-select:none;
      animation:fall linear infinite;
      opacity:0.8;
    }
    @keyframes fall{
      0%{
        transform:translateY(-100vh) translateX(0) rotate(0deg);
        opacity:0;
      }
      10%{
        opacity:0.8;
      }
      90%{
        opacity:0.8;
      }
      100%{
        transform:translateY(100vh) translateX(var(--drift)) rotate(360deg);
        opacity:0;
      }
    }
    @keyframes sway{
      0%,100%{
        transform:translateX(0);
      }
      50%{
        transform:translateX(var(--sway-amount));
      }
    }
  </style>
</head>
<body>
<div class="snow-container" id="snowContainer"></div>
<header>
  <div class="title">
    <h1>Адвент‑календарь клуба Data Science & Coffee & Sigarettes </h1>
    <p class="subtitle">
      Окошки открываются только в свою дату (по вашему локальному времени).
      Нажмите на день, чтобы увидеть материал.
    </p>
  </div>
  <div class="meta">
    <div class="pill" id="todayPill"><span class="dot" id="todayDot"></span><span id="todayText">Сегодня: —</span></div>
    <div class="pill"><span class="kbd">Подсказка:</span> можно “переиграть” дату, изменив системное время</div>
  </div>
</header>

<main>
  <section class="grid" id="grid" aria-label="Адвент-календарь">
    <!-- Карточки вставятся скриптом -->
  </section>
</main>

<dialog id="modal" aria-labelledby="modalTitle">
  <div class="modal-header">
    <div>
      <h2 class="modal-title" id="modalTitle">—</h2>
      <p class="modal-sub" id="modalSub">—</p>
    </div>
    <button class="btn btn-secondary" id="closeX" type="button" aria-label="Закрыть">Закрыть</button>
  </div>
  <div class="modal-body" id="modalBody"></div>
  <div class="modal-footer">
    <button class="btn btn-secondary" id="closeBtn" type="button">Закрыть</button>
  </div>
</dialog>

<script>
  // --- Данные календаря (1–10 января) ---
  const items = [
    {
      day: 1,
      title: "День 1: Интервью с Sebastian Borgeaud",
      summary: "Техлид Gemini. Мало где можно послушать о том, как фронтирные лабы думают о претрейне.",
      links: [
        { label: "Pre-train Gemini", url: "https://www.youtube.com/watch?v=cNGDAqFXvew" },
      ]
    },
    {
      day: 2,
      title: "День 2: Коллекция мыслей про оптимизацию",
      summary: "Набор практических и концептуальных идей)",
      links: [
        { label: "Коллекция мыслей про оптимизацию", url: "https://abseil.io/fast/hints.html" },
      ]
    },
    {
      day: 3,
      title: "День 3: AI агенты - курсы",
      summary: "Ценные курсы от bigtech про агентов.",
      links: [
        { label: "microsoft", url: "https://learn.microsoft.com/en-us/shows/ai-agents-for-beginners/" },
        { label: "google", url: "https://grow.google/ai/" }
      ]
    },
    {
      day: 4,
      title: "День 4: Как ускорять AB?",
      summary: "Рассказ от Вани Максимова.",
      links: [
        { label: "AB", url: "https://www.youtube.com/watch?v=4_J5pvdG35U&t=5s" },
      ]
    },
    {
      day: 5,
      title: "День 5: Немного про фичи",
      summary: "Идеи и мысли про Feature engineering",
      links: [
        { label: "про FE против Random", url: "https://arxiv.org/abs/2508.03593" },
        { label: "про LLM FE", url: "https://arxiv.org/pdf/2404.09491" }
      ]
    },
    {
      day: 6,
      title: "День 6: ML in 2025",
      summary: "Важные прорывы и статьи",
      links: [
        { label: "scikit-learn: Model evaluation", url: "https://machinelearningmastery.com/5-breakthrough-machine-learning-research-papers-already-in-2025/" },
      ]
    },
    {
      day: 7,
      title: "День 7: Астрологи предсказали тренды 2026",
      summary: "Что ждет ML/DS/AI в новом году",
      links: [
        { label: "linkedin", url: "https://www.linkedin.com/pulse/top-8-ai-predictions-2026-jean-ng--anxsc/" },
        { label: "mictosoft", url: "https://news.microsoft.com/source/features/ai/whats-next-in-ai-7-trends-to-watch-in-2026/" }
      ]
    },
    {
      day: 8,
      title: "День 8: Кино",
      summary: "Если к этому дню вы уже все посмотрели, то вот еще один новогодний фильм)",
      links: [
        { label: "Со мною вот что происходит", url: "https://www.kinopoisk.ru/film/659909/" },
      ]
    },
    {
      day: 9,
      title: "День 9: Data driven 2025",
      summary: "Полезные доклады с не столь давнего Data Driven",
      links: [
        { label: "Data driven", url: "https://www.youtube.com/watch?v=CYt-JakE1_s" },
      ]
    },
    {
      day: 10,
      title: "День 10: Идеи AI стартапов",
      summary: "Если вы об этом думаете, то вы такие не одни!",
      links: [
        { label: "ideas", url: "https://www.squareboat.com/blog/top-20-artificial-intelligence-ai-business-ideas-2026" },
      ]
    }
  ];

  // --- Логика дат ---
  const now = new Date();

  // Если календарь делают в декабре — разумно считать январь следующего года.
  const targetYear = (now.getMonth() === 11) ? now.getFullYear() + 1 : now.getFullYear();

  function startOfDay(d){
    return new Date(d.getFullYear(), d.getMonth(), d.getDate(), 0, 0, 0, 0);
  }
  const today0 = startOfDay(now);

  // UI "Сегодня"
  const fmt = new Intl.DateTimeFormat("ru-RU", { day:"2-digit", month:"long", year:"numeric" });
  document.getElementById("todayText").textContent = `Сегодня: ${fmt.format(now)}`;
  // dot (зеленый если в период 1–10 янв целевого года, иначе нейтрально)
  const inWindow = (now >= new Date(targetYear, 0, 1) && now <= new Date(targetYear, 0, 10, 23, 59, 59));
  if(!inWindow){
    document.getElementById("todayDot").classList.add("locked");
  }

  const grid = document.getElementById("grid");
  const modal = document.getElementById("modal");
  const modalTitle = document.getElementById("modalTitle");
  const modalSub = document.getElementById("modalSub");
  const modalBody = document.getElementById("modalBody");

  function isUnlocked(day){
    const unlockDate = new Date(targetYear, 0, day, 0, 0, 0, 0); // Jan = 0
    return today0 >= startOfDay(unlockDate);
  }

  function niceDate(day){
    const d = new Date(targetYear, 0, day);
    return new Intl.DateTimeFormat("ru-RU", { day:"2-digit", month:"long" }).format(d);
  }

  function openModal(item){
    modalTitle.textContent = item.title;
    modalSub.textContent = `Открыто: ${niceDate(item.day)} (год: ${targetYear})`;

    const linksBlock = document.createElement("div");
    linksBlock.innerHTML = `<div style="margin-top:8px;color:var(--muted);font-size:13px;">Материалы:</div>`;
    const ulLinks = document.createElement("ul");
    item.links.forEach(l => {
      const li = document.createElement("li");
      const a = document.createElement("a");
      a.href = l.url;
      a.target = "_blank";
      a.rel = "noopener noreferrer";
      a.textContent = l.label;
      // Предотвращаем всплытие события, чтобы клик по ссылке не закрывал модалку
      a.addEventListener("click", (e) => {
        e.stopPropagation();
      });
      li.appendChild(a);
      ulLinks.appendChild(li);
    });
    linksBlock.appendChild(ulLinks);

    modalBody.replaceChildren();
    const summaryP = document.createElement("p");
    summaryP.textContent = item.summary;
    modalBody.appendChild(summaryP);
    modalBody.appendChild(linksBlock);

    if (typeof modal.showModal === "function") modal.showModal();
    else alert(item.title + "\n\n" + item.summary); // fallback для очень старых браузеров
  }

  // Рендер карточек
  items.forEach(item => {
    const unlocked = isUnlocked(item.day);

    const card = document.createElement("article");
    card.className = "card" + (unlocked ? " open" : "");
    card.setAttribute("data-day", item.day);

    const inner = document.createElement("div");
    inner.className = "card-inner";

    const top = document.createElement("div");
    top.className = "topline";

    const left = document.createElement("div");
    left.innerHTML = `
      <div class="day">${item.day}</div>
      <div class="date">${niceDate(item.day)}</div>
    `;

    const badge = document.createElement("div");
    badge.className = "badge " + (unlocked ? "open" : "locked");
    badge.textContent = unlocked ? "Открыто" : "Закрыто";

    top.appendChild(left);
    top.appendChild(badge);

    const preview = document.createElement("div");
    preview.className = "content-preview";
    preview.innerHTML = unlocked
      ? `<b>Тема:</b> ${item.summary}<br><span class="linklike">Нажмите, чтобы открыть</span>`
      : `<b>Тема:</b> ${item.summary}<br><span style="color:var(--muted)">Откроется ${niceDate(item.day)}</span>`;

    inner.appendChild(top);
    inner.appendChild(preview);

    // Дверца
    const door = document.createElement("div");
    door.className = "door";
    const doorContent = document.createElement("div");
    doorContent.className = "door-content";

    const doorTitle = document.createElement("div");
    doorTitle.className = "door-title";
    doorTitle.textContent = unlocked ? "Открывайте!" : "Ещё рано";

    const doorHint = document.createElement("div");
    doorHint.className = "door-hint";
    doorHint.textContent = unlocked
      ? "Материал доступен — нажмите на карточку."
      : `Доступно с ${niceDate(item.day)}.`;

    const btn = document.createElement("button");
    btn.className = "btn";
    btn.type = "button";
    btn.textContent = unlocked ? "Открыть" : "Заперто";
    if(!unlocked) btn.disabled = true;

    doorContent.appendChild(doorTitle);
    doorContent.appendChild(doorHint);
    doorContent.appendChild(btn);
    door.appendChild(doorContent);

    card.appendChild(inner);
    card.appendChild(door);

    // Клик по карточке: если открыто — показываем модалку
    card.addEventListener("click", (e) => {
      // если нажали на disabled кнопку — ничего
      if (e.target instanceof HTMLButtonElement && e.target.disabled) return;
      if (!isUnlocked(item.day)) return;
      openModal(item);
    });

    grid.appendChild(card);
  });

  // Закрытие модалки
  function closeModal(){
    if (modal.open) modal.close();
  }
  document.getElementById("closeBtn").addEventListener("click", closeModal);
  document.getElementById("closeX").addEventListener("click", closeModal);
  modal.addEventListener("click", (e) => {
    // клик по фону внутри dialog (вне контента) — закрыть
    // но не закрывать, если кликнули по ссылке или другому интерактивному элементу
    if (e.target.tagName === "A" || e.target.closest("a")) return;
    const rect = modal.getBoundingClientRect();
    const inDialog =
      e.clientX >= rect.left && e.clientX <= rect.right &&
      e.clientY >= rect.top && e.clientY <= rect.bottom;
    if (!inDialog) closeModal();
  });
  window.addEventListener("keydown", (e) => {
    if (e.key === "Escape") closeModal();
  });

  // --- Эффект падающего снега ---
  const snowContainer = document.getElementById("snowContainer");
  const snowflakes = ["❄", "❅", "❆", "✻", "✼", "✽", "✾", "✿", "❀"];
  const numSnowflakes = 50;

  function createSnowflake(){
    const snowflake = document.createElement("div");
    snowflake.className = "snowflake";
    snowflake.textContent = snowflakes[Math.floor(Math.random() * snowflakes.length)];
    
    const size = Math.random() * 0.8 + 0.4; // от 0.4em до 1.2em
    snowflake.style.fontSize = size + "em";
    snowflake.style.left = Math.random() * 100 + "%";
    snowflake.style.animationDuration = (Math.random() * 10 + 5) + "s"; // от 5 до 15 секунд
    snowflake.style.animationDelay = Math.random() * 5 + "s";
    
    // Случайное смещение влево-вправо при падении
    const drift = (Math.random() - 0.5) * 100;
    snowflake.style.setProperty("--drift", drift + "px");
    
    // Дополнительное покачивание
    const swayAmount = (Math.random() - 0.5) * 30;
    snowflake.style.setProperty("--sway-amount", swayAmount + "px");
    snowflake.style.animation = `fall ${snowflake.style.animationDuration} linear infinite, sway ${Math.random() * 3 + 2}s ease-in-out infinite`;
    
    snowContainer.appendChild(snowflake);
    
    // Удаляем снежинку после завершения анимации
    setTimeout(() => {
      if(snowflake.parentNode){
        snowflake.remove();
      }
    }, parseFloat(snowflake.style.animationDuration) * 1000 + 1000);
  }

  // Создаем начальные снежинки
  for(let i = 0; i < numSnowflakes; i++){
    setTimeout(() => createSnowflake(), i * 200);
  }

  // Продолжаем создавать новые снежинки
  setInterval(() => {
    if(snowContainer.children.length < numSnowflakes){
      createSnowflake();
    }
  }, 500);
</script>
</body>
</html>
